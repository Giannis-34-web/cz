<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>&#10084;I promise I love you forever!&#10084;&#65039;</title>
  <script src="https://cdn.jsdelivr.net/gh/zyoushuo/Blog/hexo/js/mouse_slide.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/zyoushuo/Blog/hexo/js/clicklove.js"></script>
  <link rel="stylesheet" href="./decor.css" />
  <style type="text/css">
    html, body {
      height: 100%;
      padding: 0;
      margin: 0;
      /* 天蓝色和粉色融合的渐变背景 */
      background: linear-gradient(135deg, #87CEEB 0%, #FFB6C1 100%);
      overflow: hidden;
      position: relative;
    }
    canvas {
      position: absolute;
      width: 100%;
      height: 100%;
    }
    .namebox{
      color: #fff;
      position: absolute;   
      top: 50%;   
      left: 50%;   
      transform: translate(-50%, -50%);   
      text-align: center;
      padding: 20px;
      text-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }
    .namebox h1{
      margin: 0 auto 20px;
      font-size: 2.5rem;
      text-shadow: 0 0 15px rgba(255,255,255,0.5);
    }
    .love-quote {
      font-family: "Brush Script MT", cursive;
      font-size: 1.5rem;
      color: #fff;
      margin-top: 20px;
      text-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    
    /* 浮动光点样式 */
    .light-particle {
      position: absolute;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, rgba(255,182,193,0.6) 70%, rgba(135,206,235,0) 100%);
      pointer-events: none;
      z-index: 10;
    }
    
    @keyframes float-random {
      0% { transform: translate(0, 0) scale(0.8); }
      25% { transform: translate(15px, -10px) scale(1); }
      50% { transform: translate(0, -20px) scale(0.9); }
      75% { transform: translate(-15px, -10px) scale(1); }
      100% { transform: translate(0, 0) scale(0.8); }
    }


    /* 音乐控制样式 - 添加到每个页面的style区域 */

.music-controls {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: white;
  border-radius: 50px;
  padding: 10px 15px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.2);
  display: flex;
  align-items: center;
  gap: 15px;
  z-index: 1000;
}

.music-btn {
  background: none;
  border: none;
  font-size: 20px;
  cursor: pointer;
  color: #e91e63;
  transition: transform 0.2s;
}

.music-btn:hover {
  transform: scale(1.1);
}

.volume-control {
  width: 100px;
  cursor: pointer;
  accent-color: #e91e63;
}

/* 新增进度条样式 */
.progress-container {
  width: 200px;
  height: 6px;
  background-color: #f0f0f0;
  border-radius: 3px;
  cursor: pointer;
  position: relative;
}

.progress-bar {
  height: 100%;
  background-color: #e91e63;
  border-radius: 3px;
  width: 0%;
}
  </style>

    <!-- 新增背景音乐代码 -->
  <audio id="bgMusic" loop>
    <source src="梁山伯与茱丽叶.flac" type="audio/flac">
    您的浏览器不支持音频播放
  </audio>
  <script>
    // 音乐控制脚本 - 替换每个页面中原有的音频脚本
// 音乐控制脚本 - 替换每个页面中原有的音频脚本
window.addEventListener('load', function() {
  const bgMusic = document.getElementById('bgMusic');
  const musicToggle = document.getElementById('musicToggle');
  const volumeSlider = document.getElementById('volumeSlider');
  const progressContainer = document.getElementById('progressContainer');
  const progressBar = document.getElementById('progressBar');
  
  // 设置初始音量
  bgMusic.volume = volumeSlider.value;
  
  // 更新按钮图标
  function updateButtonIcon() {
    musicToggle.textContent = bgMusic.paused ? "▶️" : "⏸️";
  }
  
  // 更新进度条
  function updateProgress() {
    if (bgMusic.duration) {
      const percent = (bgMusic.currentTime / bgMusic.duration) * 100;
      progressBar.style.width = percent + "%";
    }
  }
  
  // 尝试自动播放
  bgMusic.play().catch(e => {
    console.log('自动播放需要用户交互，点击播放按钮可播放音乐');
    updateButtonIcon();
  });
  
  // 播放/暂停切换
  musicToggle.addEventListener('click', function() {
    if (bgMusic.paused) {
      bgMusic.play();
    } else {
      bgMusic.pause();
    }
    updateButtonIcon();
  });
  
  // 音量调节
  volumeSlider.addEventListener('input', function() {
    bgMusic.volume = this.value;
  });
  
  // 进度条控制
  progressContainer.addEventListener('click', function(e) {
    const rect = this.getBoundingClientRect();
    const pos = (e.clientX - rect.left) / rect.width;
    bgMusic.currentTime = pos * bgMusic.duration;
  });
  
  // 监听播放进度更新进度条
  bgMusic.addEventListener('timeupdate', updateProgress);
  
  // 点击页面任意位置播放（仅首次）
  let hasInteracted = false;
  document.body.addEventListener('click', function playOnClick() {
    if (!hasInteracted && bgMusic.paused) {
      bgMusic.play().then(() => {
        hasInteracted = true;
        updateButtonIcon();
      }).catch(e => console.log('播放失败:', e));
    }
    if (hasInteracted) {
      document.body.removeEventListener('click', playOnClick);
    }
  });
  
  // 监听播放状态变化更新图标
  bgMusic.addEventListener('play', updateButtonIcon);
  bgMusic.addEventListener('pause', updateButtonIcon);
});
  </script>
</head>
<body>
<div class="page-header">一城烟雨一楼台，一花只为一树开</div>

<canvas id="pinkboard"></canvas>
<div class="namebox lace-border">
  <span></span>
  <h1>装装宝宝&#10084;&#65039;嘉嘉宝宝</h1>
  <div class="love-quote">你是微风，是晚霞是心跳不止是无可替代，更是我生命中最美的意外</div>
  <div class="love-quote">往后余生，我希望，风雪是你，平淡是你，目光所至，满心欢喜都是你</div>
</div>

<script>
  // 创建浮动光点
  function createLightParticles() {
    const container = document.body;
    const particleCount = 30;
    
    for (let i = 0; i < particleCount; i++) {
      const particle = document.createElement('div');
      particle.className = 'light-particle';
      
      // 随机样式
      const size = 5 + Math.random() * 20;
      particle.style.width = `${size}px`;
      particle.style.height = `${size}px`;
      particle.style.left = `${Math.random() * 100}vw`;
      particle.style.top = `${Math.random() * 100}vh`;
      particle.style.animation = `float-random ${10 + Math.random() * 15}s infinite ease-in-out`;
      particle.style.animationDelay = `${Math.random() * 10}s`;
      particle.style.opacity = 0.3 + Math.random() * 0.5;
      
      container.appendChild(particle);
    }
  }
  
  // 页面加载完成后创建光点
  window.addEventListener('load', createLightParticles);

  // 粒子效果配置
  var settings = {
    particles: {
      length: 500,
      duration: 2,
      velocity: 100,
      effect: -0.75,
      size: 30,
    },
  };
  
  // 浏览器兼容处理
  (function(){
    var b=0;
    var c=["ms","moz","webkit","o"];
    for(var a=0;a<c.length&&!window.requestAnimationFrame;++a){
      window.requestAnimationFrame=window[c[a]+"RequestAnimationFrame"];
      window.cancelAnimationFrame=window[c[a]+"CancelAnimationFrame"]||window[c[a]+"CancelRequestAnimationFrame"]
    }
    if(!window.requestAnimationFrame){
      window.requestAnimationFrame=function(h,e){
        var d=new Date().getTime();
        var f=Math.max(0,16-(d-b));
        var g=window.setTimeout(function(){h(d+f)},f);b=d+f;return g}}
    if(!window.cancelAnimationFrame){
      window.cancelAnimationFrame=function(d){clearTimeout(d)}
    }
  })();
  
  // 点坐标类
  var Point = (function() {
    function Point(x, y) {
      this.x = (typeof x !== 'undefined') ? x : 0;
      this.y = (typeof y !== 'undefined') ? y : 0;
    }
    Point.prototype.clone = function() {
      return new Point(this.x, this.y);
    };
    Point.prototype.length = function(length) {
      if (typeof length == 'undefined')
        return Math.sqrt(this.x * this.x + this.y * this.y);
      this.normalize();
      this.x *= length;
      this.y *= length;
      return this;
    };

    Point.prototype.normalize = function() {
      var length = this.length();
      this.x /= length;
      this.y /= length;
      return this;
    };
    return Point;
  })();

  // 粒子类
  var Particle = (function() {
    function Particle() {
      this.position = new Point();
      this.velocity = new Point();
      this.acceleration = new Point();
      this.age = 0;
    }
    Particle.prototype.initialize = function(x, y, dx, dy) {
      this.position.x = x;
      this.position.y = y;
      this.velocity.x = dx;
      this.velocity.y = dy;
      this.acceleration.x = dx * settings.particles.effect;
      this.acceleration.y = dy * settings.particles.effect;
      this.age = 0;
    };
    Particle.prototype.update = function(deltaTime) {
      this.position.x += this.velocity.x * deltaTime;
      this.position.y += this.velocity.y * deltaTime;
      this.velocity.x += this.acceleration.x * deltaTime;
      this.velocity.y += this.acceleration.y * deltaTime;
      this.age += deltaTime;
    };

    Particle.prototype.draw = function(context, image) {
      function ease(t) {
        return (--t) * t * t + 1;
      }
      var size = image.width * ease(this.age / settings.particles.duration);
      context.globalAlpha = 1 - this.age / settings.particles.duration;
      context.drawImage(image, this.position.x - size / 2, this.position.y - size / 2, size, size);
    };
    return Particle;
  })();

  // 粒子池类
  var ParticlePool = (function() {
    var particles,
            firstActive = 0,
            firstFree = 0,
            duration = settings.particles.duration;
    function ParticlePool(length) {
      particles = new Array(length);
      for (var i = 0; i < particles.length; i++)
        particles[i] = new Particle();
    }
    ParticlePool.prototype.add = function(x, y, dx, dy) {
      particles[firstFree].initialize(x, y, dx, dy);
      firstFree++;
      if (firstFree == particles.length) firstFree = 0;
      if (firstActive == firstFree ) firstActive++;
      if (firstActive == particles.length) firstActive = 0;
    };
    ParticlePool.prototype.update = function(deltaTime) {
      var i;
      if (firstActive < firstFree) {
        for (i = firstActive; i < firstFree; i++)
          particles[i].update(deltaTime);
      }
      if (firstFree < firstActive) {
        for (i = firstActive; i < particles.length; i++)
          particles[i].update(deltaTime);
        for (i = 0; i < firstFree; i++)
          particles[i].update(deltaTime);
      }
      while (particles[firstActive].age >= duration && firstActive != firstFree) {
        firstActive++;
        if (firstActive == particles.length) firstActive = 0;
      }
    };
    ParticlePool.prototype.draw = function(context, image) {
      if (firstActive < firstFree) {
        for (i = firstActive; i < firstFree; i++)
          particles[i].draw(context, image);
      }
      if (firstFree < firstActive) {
        for (i = firstActive; i < particles.length; i++)
          particles[i].draw(context, image);
        for (i = 0; i < firstFree; i++)
          particles[i].draw(context, image);
      }
    };
    return ParticlePool;
  })();

  // 爱心粒子效果
  (function(canvas) {
    var context = canvas.getContext('2d'),
            particles = new ParticlePool(settings.particles.length),
            particleRate = settings.particles.length / settings.particles.duration,
            time;

    // 爱心形状函数
    function pointOnHeart(t) {
      return new Point(
              160 * Math.pow(Math.sin(t), 3),
              130 * Math.cos(t) - 50 * Math.cos(2 * t) - 20 * Math.cos(3 * t) - 10 * Math.cos(4 * t) + 25
      );
    }

    // 创建爱心图像（调整为粉色和天蓝色渐变）
    var image = (function() {
      var canvas = document.createElement('canvas'),
              context = canvas.getContext('2d');
      canvas.width = settings.particles.size;
      canvas.height = settings.particles.size;

      function to(t) {
        var point = pointOnHeart(t);
        point.x = settings.particles.size / 2 + point.x * settings.particles.size / 350;
        point.y = settings.particles.size / 2 - point.y * settings.particles.size / 350;
        return point;
      }

      // 创建渐变色爱心
      const gradient = context.createLinearGradient(0, 0, canvas.width, canvas.height);
      gradient.addColorStop(0, '#FF69B4'); // 粉色
      gradient.addColorStop(1, '#87CEFA'); // 天蓝色
      
      context.beginPath();
      var t = -Math.PI;
      var point = to(t);
      context.moveTo(point.x, point.y);
      while (t < Math.PI) {
        t += 0.01;
        point = to(t);
        context.lineTo(point.x, point.y);
      }
      context.closePath();
      context.fillStyle = gradient; // 使用渐变色
      context.fill();
      
      var image = new Image();
      image.src = canvas.toDataURL();
      return image;
    })();

    // 渲染函数
    function render() {
      requestAnimationFrame(render);
      var newTime = new Date().getTime() / 1000,
              deltaTime = newTime - (time || newTime);
      time = newTime;
      context.clearRect(0, 0, canvas.width, canvas.height);
      var amount = particleRate * deltaTime;
      for (var i = 0; i < amount; i++) {
        var pos = pointOnHeart(Math.PI - 2 * Math.PI * Math.random());
        var dir = pos.clone().length(settings.particles.velocity);
        particles.add(canvas.width / 2 + pos.x, canvas.height / 2 - pos.y, dir.x, -dir.y);
      }
      particles.update(deltaTime);
      particles.draw(context, image);
    }

    // 响应窗口大小变化
    function onResize() {
      canvas.width = canvas.clientWidth;
      canvas.height = canvas.clientHeight;
    }
    window.onresize = onResize;

    // 初始化
    setTimeout(function() {
      onResize();
      render();
    }, 10);
  })(document.getElementById('pinkboard'));
</script>

<!-- 音乐控制按钮 - 添加到每个页面的body中 -->
<div class="music-controls">
  <button class="music-btn" id="musicToggle">▶️</button>
  <div class="progress-container" id="progressContainer">
    <div class="progress-bar" id="progressBar"></div>
  </div>
  <input type="range" class="volume-control" id="volumeSlider" min="0" max="1" step="0.1" value="1">
</div>


</body>
</html>
